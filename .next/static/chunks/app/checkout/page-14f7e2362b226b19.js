(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{7192:function(e,t,s){Promise.resolve().then(s.bind(s,3835))},3835:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(7437),r=s(2265),l=s(9376),n=s(7648),i=s(3145),o=s(3827),c=s(5734),d=s(8672),u=s(4604),m=s(8226),x=s(2252);let p="pk_test_your_stripe_publishable_key_here",h=p?(0,d.J)(p):null;function g(e){var t;let{orderData:s,onSuccess:l,onError:n,isTestMode:i=!1}=e,o=i?null:(0,u.MD)(),c=i?null:(0,u.lq)(),[d,h]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[b,f]=(0,r.useState)(!1),[j,N]=(0,r.useState)("ideal"),[v,w]=(0,r.useState)("ing"),C=async()=>{console.log("\uD83D\uDE80 handlePayment called"),console.log("\uD83D\uDE80 isTestMode:",i),console.log("\uD83D\uDE80 stripePublishableKey:",p),h(!0),y(null);try{let e;if(console.log("\uD83D\uDCB3 Starting payment process..."),console.log("\uD83D\uDCCA Order data:",s),console.log("\uD83C\uDFE6 Selected bank:",v),console.log("\uD83D\uDCB3 Payment method:",j),i||!p){console.log("\uD83E\uDDEA Test mode: Simuleer succesvolle betaling"),await new Promise(e=>setTimeout(e,2e3)),console.log("✅ Test payment successful"),f(!0),null==l||l({id:"test_payment_"+Date.now()});return}if(!o||!c)throw Error("Stripe niet geladen");console.log("\uD83D\uDCB3 Creating payment intent...");let t=await fetch("/api/payments/create-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:s.items,shippingAddress:s.shippingAddress,totalAmount:s.totalAmount,paymentMethod:j,selectedBank:v})}),a=await t.json();if(console.log("\uD83D\uDCB3 Payment intent response:",a),!a.success)throw Error(a.error||"Payment Intent kon niet worden aangemaakt");let{clientSecret:r}=a.data;if(console.log("\uD83D\uDCB3 Client secret:",r),"ideal"===j)e=await o.confirmIdealPayment(r,{payment_method:{ideal:{bank:v}},return_url:"".concat(window.location.origin,"/checkout/success")});else{let t=c.getElement(u.NZ);if(!t)throw Error("Card element niet gevonden");e=await o.confirmCardPayment(r,{payment_method:{card:t}})}if(console.log("\uD83D\uDCB3 Confirm result:",e),e.error)throw Error(e.error.message);if("succeeded"===e.paymentIntent.status)console.log("✅ Payment successful"),f(!0),null==l||l(e.paymentIntent);else throw Error("Betaling niet voltooid")}catch(t){console.error("❌ Payment error:",t);let e=t instanceof Error?t.message:"Onbekende fout";y(e),null==n||n(e)}finally{h(!1)}};return b?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-green-500 text-6xl mb-4",children:"✅"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Betaling succesvol!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Je bestelling is bevestigd en wordt verwerkt."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Betaalmethode"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"paymentMethod",value:"ideal",checked:"ideal"===j,onChange:e=>N(e.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium",children:"iDEAL"})]})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===j,onChange:e=>N(e.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium",children:"Creditcard"})]})]})]})]}),"ideal"===j&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Selecteer je bank"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:["ing","abn","rabobank","sns","asn","bunq"].map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"bank",value:e,checked:v===e,onChange:e=>w(e.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:e})]},e))})]}),"card"===j&&!i&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Creditcard gegevens"}),(0,a.jsx)("div",{className:"p-4 border rounded-lg bg-gray-50",children:(0,a.jsx)(u.NZ,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}}}}})})]}),"card"===j&&i&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-yellow-500"}),(0,a.jsx)("span",{className:"text-yellow-800 font-medium",children:"Test Mode"})]}),(0,a.jsx)("p",{className:"text-yellow-700 mt-1",children:"Creditcard betalingen worden gesimuleerd in test mode. Geen echte betalingen worden verwerkt."})]})}),g&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-red-500"}),(0,a.jsx)("span",{className:"text-red-800 font-medium",children:"Betaling gefaald"})]}),(0,a.jsx)("p",{className:"text-red-700 mt-1",children:g})]}),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsx)("button",{onClick:C,disabled:d,className:"w-full py-4 px-6 rounded-xl font-semibold text-lg transition-colors ".concat(d?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl"),children:d?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Bezig met betalen..."})]}):(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5"}),(0,a.jsxs)("span",{children:["Betaal €",(null===(t=s.totalAmount)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]})})})]})}function y(e){let{orderData:t,onSuccess:s,onError:r}=e;return(console.log("\uD83D\uDD0D StripeCheckout component loaded"),console.log("\uD83D\uDD0D Stripe publishable key:",p),console.log("\uD83D\uDD0D Order data:",t),p)?(console.log("\uD83D\uDCB3 Rendering in production mode"),(0,a.jsx)(u.eK,{stripe:h,children:(0,a.jsx)(g,{orderData:t,onSuccess:s,onError:r,isTestMode:!1})})):(console.log("\uD83E\uDDEA Rendering in test mode"),(0,a.jsx)(g,{orderData:t,onSuccess:s,onError:r,isTestMode:!0}))}var b=s(2660),f=s(8906),j=s(340),N=s(9076);function v(){var e;let{state:t,clearCart:s}=(0,o.j)(),{state:d}=(0,c.a)(),u=(0,l.useRouter)(),[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!0),[v,w]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),[S,D]=(0,r.useState)({email:"",firstName:"",lastName:"",phone:"",street:"",city:"",postalCode:"",country:"Nederland",sameAsBilling:!0,billingFirstName:"",billingLastName:"",billingStreet:"",billingCity:"",billingPostalCode:"",billingCountry:"Nederland",paymentMethod:"stripe",termsAccepted:!1}),[A,E]=(0,r.useState)({}),T=t.items.length>0?t.items:[{productId:"68fbaff6bcefbe68097f111d",name:"Smart Fitness Ring Tracker",price:39.99,quantity:1,image:"https://images.unsplash.com/photo-1551698618-1dfe5d97d256?q=80&w=800&auto=format&fit=crop",maxStock:15}],I=T.reduce((e,t)=>e+t.price*t.quantity,0),_=.21*I,O=I+_;(0,r.useEffect)(()=>{0===t.items.length&&u.push("/cart")},[t.items.length,u]);let L=e=>{let{name:t,value:s,type:a}=e.target,r=e.target.checked;D(e=>({...e,[t]:"checkbox"===a?r:s})),A[t]&&E(e=>({...e,[t]:void 0}))},P=()=>{let e={};return S.email||(e.email="Email is verplicht"),S.firstName||(e.firstName="Voornaam is verplicht"),S.lastName||(e.lastName="Achternaam is verplicht"),S.phone||(e.phone="Telefoonnummer is verplicht"),S.street||(e.street="Straat is verplicht"),S.city||(e.city="Stad is verplicht"),S.postalCode||(e.postalCode="Postcode is verplicht"),S.termsAccepted||(e.termsAccepted="Je moet de voorwaarden accepteren"),S.sameAsBilling||(S.billingFirstName||(e.billingFirstName="Factuur voornaam is verplicht"),S.billingLastName||(e.billingLastName="Factuur achternaam is verplicht"),S.billingStreet||(e.billingStreet="Factuur straat is verplicht"),S.billingCity||(e.billingCity="Factuur stad is verplicht"),S.billingPostalCode||(e.billingPostalCode="Factuur postcode is verplicht")),E(e),0===Object.keys(e).length};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(n.default,{href:"/cart",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"Terug naar winkelwagen"]}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Afrekenen"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Voltooi je bestelling veilig en snel"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2 space-y-8",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)(m.Z,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Betaling"})]}),(0,a.jsx)(y,{orderData:{items:T.map(e=>({productId:e.productId,quantity:e.quantity})),shippingAddress:{firstName:S.firstName,lastName:S.lastName,street:S.street,city:S.city,postalCode:S.postalCode,country:S.country,phone:S.phone,email:S.email},billingAddress:S.sameAsBilling?{firstName:S.firstName,lastName:S.lastName,street:S.street,city:S.city,postalCode:S.postalCode,country:S.country}:{firstName:S.billingFirstName,lastName:S.billingLastName,street:S.billingStreet,city:S.billingCity,postalCode:S.billingPostalCode,country:S.billingCountry},paymentMethod:S.paymentMethod,userId:null===(e=d.user)||void 0===e?void 0:e._id,totalAmount:O||0},onSuccess:e=>{s(),u.push("/checkout/success?order=".concat(e))},onError:e=>{console.error("Payment error:",e),w(e),k(!0),p(!1)}})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsx)("button",{onClick:()=>g(!1),className:"w-full bg-gray-100 text-gray-700 font-semibold py-3 px-6 rounded-xl hover:bg-gray-200 transition-colors",children:"Terug naar gegevens"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Contactgegevens"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,a.jsx)("input",{type:"email",name:"email",value:S.email,onChange:L,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.email?"border-red-500":"border-gray-300"),placeholder:"je@email.com"}),A.email&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:String(A.email)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefoonnummer *"}),(0,a.jsx)("input",{type:"tel",name:"phone",value:S.phone,onChange:L,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.phone?"border-red-500":"border-gray-300"),placeholder:"06-12345678"}),A.phone&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:String(A.phone)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Verzendadres"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voornaam *"}),(0,a.jsx)("input",{type:"text",name:"firstName",value:S.firstName,onChange:L,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.firstName?"border-red-500":"border-gray-300"),placeholder:"Jan"}),A.firstName&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:String(A.firstName)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Achternaam *"}),(0,a.jsx)("input",{type:"text",name:"lastName",value:S.lastName,onChange:L,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.lastName?"border-red-500":"border-gray-300"),placeholder:"Jansen"}),A.lastName&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:String(A.lastName)})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Straat en huisnummer *"}),(0,a.jsx)("input",{type:"text",name:"street",value:S.street,onChange:L,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.street?"border-red-500":"border-gray-300"),placeholder:"Hoofdstraat 123"}),A.street&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:String(A.street)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stad *"}),(0,a.jsx)("input",{type:"text",name:"city",value:S.city,onChange:L,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.city?"border-red-500":"border-gray-300"),placeholder:"Amsterdam"}),A.city&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:String(A.city)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postcode *"}),(0,a.jsx)("input",{type:"text",name:"postalCode",value:S.postalCode,onChange:L,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.postalCode?"border-red-500":"border-gray-300"),placeholder:"1234 AB"}),A.postalCode&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:String(A.postalCode)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Land *"}),(0,a.jsxs)("select",{name:"country",value:S.country,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"Nederland",children:"Nederland"}),(0,a.jsx)("option",{value:"Belgi\xeb",children:"Belgi\xeb"}),(0,a.jsx)("option",{value:"Duitsland",children:"Duitsland"}),(0,a.jsx)("option",{value:"Frankrijk",children:"Frankrijk"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("input",{type:"checkbox",name:"termsAccepted",checked:S.termsAccepted,onChange:L,className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("label",{className:"ml-3 text-sm text-gray-700",children:["Ik accepteer de"," ",(0,a.jsx)(n.default,{href:"/terms",className:"text-blue-600 hover:text-blue-800",children:"algemene voorwaarden"})," ","en"," ",(0,a.jsx)(n.default,{href:"/privacy",className:"text-blue-600 hover:text-blue-800",children:"privacybeleid"})]})]}),A.termsAccepted&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:String(A.termsAccepted)})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsx)("button",{onClick:()=>{P()&&g(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Verder naar betaling"]})})})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 sticky top-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Besteloverzicht"}),(0,a.jsx)("div",{className:"space-y-4 mb-6",children:T.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-16 h-16 relative",children:(0,a.jsx)(i.default,{src:e.image,alt:e.name,fill:!0,style:{objectFit:"cover"},className:"rounded-lg"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Aantal: ",e.quantity]})]}),(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["€",(e.price*e.quantity).toFixed(2)]})]},e.productId))}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,a.jsx)("span",{children:"Subtotaal"}),(0,a.jsxs)("span",{children:["€",(I||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,a.jsx)("span",{children:"BTW (21%)"}),(0,a.jsxs)("span",{children:["€",(_||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,a.jsx)("span",{children:"Verzendkosten"}),(0,a.jsx)("span",{className:"text-green-600 font-medium",children:"Gratis"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xl font-bold text-gray-900 border-t border-gray-200 pt-3",children:[(0,a.jsx)("span",{children:"Totaal"}),(0,a.jsxs)("span",{children:["€",(O||0).toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2 text-green-500"}),(0,a.jsx)("span",{children:"Veilig betalen met Stripe"})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-2 text-blue-500"}),(0,a.jsx)("span",{children:"Gratis verzending"})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 mr-2 text-purple-500"}),(0,a.jsx)("span",{children:"30 dagen retourrecht"})]})]})]})})]})]}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:(0,a.jsx)("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Betaling gefaald"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:v||"Er is een onbekende fout opgetreden tijdens de betaling."}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{k(!1),w(null),g(!1)},className:"flex-1 bg-gray-100 text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"Opnieuw proberen"}),(0,a.jsx)("button",{onClick:()=>{k(!1),w(null),u.push("/cart")},className:"flex-1 bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Terug naar winkelwagen"})]})]})})})]})}function w(){return(0,a.jsx)(v,{})}},5734:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return d},a:function(){return u}});var a=s(7437),r=s(2265),l=s(557),n=s.n(l);let i=(0,r.createContext)(null),o=(e,t)=>{switch(t.type){case"LOGIN_START":return{...e,isLoading:!0};case"LOGIN_SUCCESS":case"LOAD_USER":return{...e,user:t.payload.user,token:t.payload.token,isAuthenticated:!0,isLoading:!1};case"LOGIN_FAILURE":case"LOGOUT":return{...e,user:null,token:null,isAuthenticated:!1,isLoading:!1};case"UPDATE_USER":return{...e,user:e.user?{...e.user,...t.payload}:null};default:return e}},c={user:null,isAuthenticated:!1,isLoading:!0,token:null};function d(e){let{children:t}=e,[s,l]=(0,r.useReducer)(o,c);(0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("pulsebuy-token");if(e){if(function(e){try{return n().verify(e,"your-super-secret-jwt-key-here")}catch(e){return null}}(e)){let t=await fetch("/api/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let s=await t.json();l({type:"LOAD_USER",payload:{user:s.user,token:e}})}else localStorage.removeItem("pulsebuy-token")}else localStorage.removeItem("pulsebuy-token")}}catch(e){console.error("Error loading user:",e),localStorage.removeItem("pulsebuy-token")}finally{l({type:"LOGIN_FAILURE"})}})()},[]);let d=async(e,t)=>{l({type:"LOGIN_START"});try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await s.json();if(a.success)return localStorage.setItem("pulsebuy-token",a.token),l({type:"LOGIN_SUCCESS",payload:{user:a.user,token:a.token}}),{success:!0,message:"Succesvol ingelogd!"};return l({type:"LOGIN_FAILURE"}),{success:!1,message:a.message||"Inloggen gefaald"}}catch(e){return l({type:"LOGIN_FAILURE"}),{success:!1,message:"Er is een fout opgetreden"}}},u=async e=>{try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(s.success)return{success:!0,message:"Account succesvol aangemaakt! Je kunt nu inloggen."};return{success:!1,message:s.message||"Registratie gefaald"}}catch(e){return{success:!1,message:"Er is een fout opgetreden"}}},m=async e=>{try{let t=await fetch("/api/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify(e)}),a=await t.json();if(a.success)return l({type:"UPDATE_USER",payload:e}),{success:!0,message:"Profiel bijgewerkt!"};return{success:!1,message:a.message||"Bijwerken gefaald"}}catch(e){return{success:!1,message:"Er is een fout opgetreden"}}};return(0,a.jsx)(i.Provider,{value:{state:s,dispatch:l,login:d,register:u,logout:()=>{localStorage.removeItem("pulsebuy-token"),l({type:"LOGOUT"})},updateProfile:m},children:t})}function u(){let e=(0,r.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},3827:function(e,t,s){"use strict";s.d(t,{CartProvider:function(){return o},j:function(){return c}});var a=s(7437),r=s(2265);let l=(0,r.createContext)(null),n=(e,t)=>{switch(t.type){case"ADD_ITEM":if(e.items.find(e=>e.productId===t.payload.productId)){let s=e.items.map(e=>e.productId===t.payload.productId?{...e,quantity:Math.min(e.quantity+t.payload.quantity,e.maxStock)}:e);return{...e,items:s,total:s.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:s.reduce((e,t)=>e+t.quantity,0)}}{let s={...t.payload,id:"".concat(t.payload.productId,"-").concat(Date.now())},a=[...e.items,s];return{...e,items:a,total:a.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:a.reduce((e,t)=>e+t.quantity,0)}}case"REMOVE_ITEM":{let s=e.items.filter(e=>e.id!==t.payload);return{...e,items:s,total:s.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:s.reduce((e,t)=>e+t.quantity,0)}}case"UPDATE_QUANTITY":{let s=e.items.map(e=>e.id===t.payload.id?{...e,quantity:Math.min(Math.max(t.payload.quantity,0),e.maxStock)}:e).filter(e=>e.quantity>0);return{...e,items:s,total:s.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:s.reduce((e,t)=>e+t.quantity,0)}}case"CLEAR_CART":return{...e,items:[],total:0,itemCount:0};case"TOGGLE_CART":return{...e,isOpen:!e.isOpen};case"LOAD_CART":{let s=t.payload;return{...e,items:s,total:s.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:s.reduce((e,t)=>e+t.quantity,0)}}case"SHOW_TOAST":return{...e,showToast:!0,lastAddedItem:t.payload};case"HIDE_TOAST":return{...e,showToast:!1,lastAddedItem:null};default:return e}},i={items:[],total:0,itemCount:0,isOpen:!1,showToast:!1,lastAddedItem:null};function o(e){let{children:t}=e,[s,o]=(0,r.useReducer)(n,i);return(0,r.useEffect)(()=>{{let e=localStorage.getItem("pulsebuy-cart");if(e)try{let t=JSON.parse(e);o({type:"LOAD_CART",payload:t})}catch(e){console.error("Error loading cart from localStorage:",e),localStorage.removeItem("pulsebuy-cart")}}},[]),(0,r.useEffect)(()=>{localStorage.setItem("pulsebuy-cart",JSON.stringify(s.items))},[s.items]),(0,a.jsx)(l.Provider,{value:{state:s,dispatch:o,addToCart:e=>{o({type:"ADD_ITEM",payload:e})},removeFromCart:e=>{o({type:"REMOVE_ITEM",payload:e})},updateQuantity:(e,t)=>{o({type:"UPDATE_QUANTITY",payload:{id:e,quantity:t}})},clearCart:()=>{o({type:"CLEAR_CART"})},toggleCart:()=>{o({type:"TOGGLE_CART"})},showToast:e=>{o({type:"SHOW_TOAST",payload:e})},hideToast:()=>{o({type:"HIDE_TOAST"})}},children:t})}function c(){let e=(0,r.useContext)(l);if(!e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[218,972,878,422,252,971,117,744],function(){return e(e.s=7192)}),_N_E=e.O()}]);