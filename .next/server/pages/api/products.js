"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products";
exports.ids = ["pages/api/products"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts%2Findex.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts%2Findex.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_products_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/products/index.js */ \"(api)/./pages/api/products/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_index_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_index_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/products\",\n        pathname: \"/api/products\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_products_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb2R1Y3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZwcm9kdWN0cyUyRmluZGV4LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx5REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMseURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJvcHNoaXAtbW90aW9uLz8zODQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvcHJvZHVjdHMvaW5kZXguanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9kdWN0c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2R1Y3RzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts%2Findex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = \"mongodb://localhost:27017/dropshipmotion\";\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\n/**\n * Global is used here to maintain a cached connection across hot reloads\n * in development. This prevents connections growing exponentially\n * during API Route usage.\n */ let cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            retryWrites: true\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            console.log(\"Connected to MongoDB\");\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n// Cleanup function voor development\nif (true) {\n    process.on(\"SIGINT\", async ()=>{\n        if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState === 1) {\n            await mongoose__WEBPACK_IMPORTED_MODULE_0___default().disconnect();\n            console.log(\"MongoDB disconnected\");\n        }\n    });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0I7QUFFL0IsTUFBTUMsY0FBY0MsMENBQXVCO0FBRTNDLElBQUksQ0FBQ0QsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQTs7OztDQUlDLEdBQ0QsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLGFBQWE7UUFDZjtRQUVBUCxPQUFPRyxPQUFPLEdBQUdSLHVEQUFnQixDQUFDQyxhQUFhUyxNQUFNSSxJQUFJLENBQUMsQ0FBQ2Q7WUFDekRlLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9oQjtRQUNUO0lBQ0Y7SUFFQSxJQUFJO1FBQ0ZLLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO0lBQ3BDLEVBQUUsT0FBT1MsR0FBRztRQUNWWixPQUFPRyxPQUFPLEdBQUc7UUFDakIsTUFBTVM7SUFDUjtJQUVBLE9BQU9aLE9BQU9FLElBQUk7QUFDcEI7QUFFQSxvQ0FBb0M7QUFDcEMsSUFBSUwsSUFBeUIsRUFBZTtJQUMxQ0EsUUFBUWdCLEVBQUUsQ0FBQyxVQUFVO1FBQ25CLElBQUlsQiw0REFBbUIsQ0FBQ29CLFVBQVUsS0FBSyxHQUFHO1lBQ3hDLE1BQU1wQiwwREFBbUI7WUFDekJlLFFBQVFDLEdBQUcsQ0FBQztRQUNkO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlUCxTQUFTQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJvcHNoaXAtbW90aW9uLy4vbGliL21vbmdvZGIuanM/ZDkyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnXG5cbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUklcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJylcbn1cblxuLyoqXG4gKiBHbG9iYWwgaXMgdXNlZCBoZXJlIHRvIG1haW50YWluIGEgY2FjaGVkIGNvbm5lY3Rpb24gYWNyb3NzIGhvdCByZWxvYWRzXG4gKiBpbiBkZXZlbG9wbWVudC4gVGhpcyBwcmV2ZW50cyBjb25uZWN0aW9ucyBncm93aW5nIGV4cG9uZW50aWFsbHlcbiAqIGR1cmluZyBBUEkgUm91dGUgdXNhZ2UuXG4gKi9cbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2VcblxuaWYgKCFjYWNoZWQpIHtcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdERCKCkge1xuICBpZiAoY2FjaGVkLmNvbm4pIHtcbiAgICByZXR1cm4gY2FjaGVkLmNvbm5cbiAgfVxuXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxuICAgICAgcmV0cnlXcml0ZXM6IHRydWUsXG4gICAgfVxuXG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nb0RCJylcbiAgICAgIHJldHVybiBtb25nb29zZVxuICAgIH0pXG4gIH1cblxuICB0cnkge1xuICAgIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2VcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbFxuICAgIHRocm93IGVcbiAgfVxuXG4gIHJldHVybiBjYWNoZWQuY29ublxufVxuXG4vLyBDbGVhbnVwIGZ1bmN0aW9uIHZvb3IgZGV2ZWxvcG1lbnRcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICBwcm9jZXNzLm9uKCdTSUdJTlQnLCBhc3luYyAoKSA9PiB7XG4gICAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSA9PT0gMSkge1xuICAgICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpXG4gICAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBkaXNjb25uZWN0ZWQnKVxuICAgIH1cbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdERCXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiY29ubmVjdERCIiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwicmV0cnlXcml0ZXMiLCJjb25uZWN0IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJlIiwib24iLCJjb25uZWN0aW9uIiwicmVhZHlTdGF0ZSIsImRpc2Nvbm5lY3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./models/Product.js":
/*!***************************!*\
  !*** ./models/Product.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst ProductSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    description: {\n        type: String,\n        required: true\n    },\n    price: {\n        type: Number,\n        required: true,\n        min: 0\n    },\n    originalPrice: {\n        type: Number,\n        min: 0\n    },\n    images: [\n        {\n            url: String,\n            alt: String\n        }\n    ],\n    category: {\n        type: String,\n        required: true,\n        enum: [\n            \"electronics\",\n            \"fashion\",\n            \"home\",\n            \"sports\",\n            \"beauty\",\n            \"other\"\n        ]\n    },\n    subcategory: {\n        type: String\n    },\n    brand: {\n        type: String\n    },\n    sku: {\n        type: String,\n        unique: true,\n        sparse: true\n    },\n    stock: {\n        type: Number,\n        default: 0,\n        min: 0\n    },\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    isFeatured: {\n        type: Boolean,\n        default: false\n    },\n    tags: [\n        String\n    ],\n    specifications: {\n        type: Map,\n        of: String\n    },\n    shipping: {\n        weight: Number,\n        dimensions: {\n            length: Number,\n            width: Number,\n            height: Number\n        },\n        freeShipping: {\n            type: Boolean,\n            default: false\n        }\n    },\n    supplier: {\n        name: String,\n        contact: String,\n        email: String\n    },\n    reviews: [\n        {\n            userId: {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: \"User\"\n            },\n            rating: {\n                type: Number,\n                min: 1,\n                max: 5\n            },\n            comment: String,\n            createdAt: {\n                type: Date,\n                default: Date.now\n            }\n        }\n    ],\n    averageRating: {\n        type: Number,\n        default: 0,\n        min: 0,\n        max: 5\n    },\n    totalReviews: {\n        type: Number,\n        default: 0\n    },\n    sales: {\n        type: Number,\n        default: 0\n    },\n    // Shopify integratie velden\n    shopifyId: {\n        type: String,\n        unique: true,\n        sparse: true\n    },\n    shopifyVariantId: {\n        type: String\n    },\n    // Trending en analytics velden\n    trendingScore: {\n        type: Number,\n        default: 0\n    },\n    isTrending: {\n        type: Boolean,\n        default: false\n    },\n    lastUpdated: {\n        type: Date,\n        default: Date.now\n    },\n    // AliExpress integratie velden\n    aliexpressUrl: {\n        type: String\n    },\n    costPrice: {\n        type: Number,\n        min: 0\n    },\n    profitMargin: {\n        type: Number,\n        min: 0,\n        max: 100\n    }\n}, {\n    timestamps: true\n});\n// Indexes voor betere performance\nProductSchema.index({\n    name: \"text\",\n    description: \"text\"\n});\nProductSchema.index({\n    category: 1,\n    isActive: 1\n});\nProductSchema.index({\n    price: 1\n});\nProductSchema.index({\n    averageRating: -1\n});\nProductSchema.index({\n    createdAt: -1\n});\n// Virtual voor discount percentage\nProductSchema.virtual(\"discountPercentage\").get(function() {\n    if (this.originalPrice && this.originalPrice > this.price) {\n        return Math.round((this.originalPrice - this.price) / this.originalPrice * 100);\n    }\n    return 0;\n});\n// Method om rating te updaten\nProductSchema.methods.updateRating = function() {\n    if (this.reviews.length > 0) {\n        const totalRating = this.reviews.reduce((sum, review)=>sum + review.rating, 0);\n        this.averageRating = Math.round(totalRating / this.reviews.length * 10) / 10;\n        this.totalReviews = this.reviews.length;\n    } else {\n        this.averageRating = 0;\n        this.totalReviews = 0;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Product || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Product\", ProductSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2Ryb3BzaGlwLW1vdGlvbi8uL21vZGVscy9Qcm9kdWN0LmpzPzA5YzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xuXG5jb25zdCBQcm9kdWN0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIG5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHJpbTogdHJ1ZVxuICB9LFxuICBkZXNjcmlwdGlvbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICBwcmljZToge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBtaW46IDBcbiAgfSxcbiAgb3JpZ2luYWxQcmljZToge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBtaW46IDBcbiAgfSxcbiAgaW1hZ2VzOiBbe1xuICAgIHVybDogU3RyaW5nLFxuICAgIGFsdDogU3RyaW5nXG4gIH1dLFxuICBjYXRlZ29yeToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBlbnVtOiBbJ2VsZWN0cm9uaWNzJywgJ2Zhc2hpb24nLCAnaG9tZScsICdzcG9ydHMnLCAnYmVhdXR5JywgJ290aGVyJ11cbiAgfSxcbiAgc3ViY2F0ZWdvcnk6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgYnJhbmQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgc2t1OiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICBzcGFyc2U6IHRydWVcbiAgfSxcbiAgc3RvY2s6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMCxcbiAgICBtaW46IDBcbiAgfSxcbiAgaXNBY3RpdmU6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSxcbiAgaXNGZWF0dXJlZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgdGFnczogW1N0cmluZ10sXG4gIHNwZWNpZmljYXRpb25zOiB7XG4gICAgdHlwZTogTWFwLFxuICAgIG9mOiBTdHJpbmdcbiAgfSxcbiAgc2hpcHBpbmc6IHtcbiAgICB3ZWlnaHQ6IE51bWJlcixcbiAgICBkaW1lbnNpb25zOiB7XG4gICAgICBsZW5ndGg6IE51bWJlcixcbiAgICAgIHdpZHRoOiBOdW1iZXIsXG4gICAgICBoZWlnaHQ6IE51bWJlclxuICAgIH0sXG4gICAgZnJlZVNoaXBwaW5nOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9XG4gIH0sXG4gIHN1cHBsaWVyOiB7XG4gICAgbmFtZTogU3RyaW5nLFxuICAgIGNvbnRhY3Q6IFN0cmluZyxcbiAgICBlbWFpbDogU3RyaW5nXG4gIH0sXG4gIHJldmlld3M6IFt7XG4gICAgdXNlcklkOiB7XG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICByZWY6ICdVc2VyJ1xuICAgIH0sXG4gICAgcmF0aW5nOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBtaW46IDEsXG4gICAgICBtYXg6IDVcbiAgICB9LFxuICAgIGNvbW1lbnQ6IFN0cmluZyxcbiAgICBjcmVhdGVkQXQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICAgIH1cbiAgfV0sXG4gIGF2ZXJhZ2VSYXRpbmc6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMCxcbiAgICBtaW46IDAsXG4gICAgbWF4OiA1XG4gIH0sXG4gIHRvdGFsUmV2aWV3czoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwXG4gIH0sXG4gIHNhbGVzOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IDBcbiAgfSxcbiAgLy8gU2hvcGlmeSBpbnRlZ3JhdGllIHZlbGRlblxuICBzaG9waWZ5SWQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIHNwYXJzZTogdHJ1ZVxuICB9LFxuICBzaG9waWZ5VmFyaWFudElkOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIC8vIFRyZW5kaW5nIGVuIGFuYWx5dGljcyB2ZWxkZW5cbiAgdHJlbmRpbmdTY29yZToge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwXG4gIH0sXG4gIGlzVHJlbmRpbmc6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0sXG4gIGxhc3RVcGRhdGVkOiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICB9LFxuICAvLyBBbGlFeHByZXNzIGludGVncmF0aWUgdmVsZGVuXG4gIGFsaWV4cHJlc3NVcmw6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgY29zdFByaWNlOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIG1pbjogMFxuICB9LFxuICBwcm9maXRNYXJnaW46IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgbWluOiAwLFxuICAgIG1heDogMTAwXG4gIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSlcblxuLy8gSW5kZXhlcyB2b29yIGJldGVyZSBwZXJmb3JtYW5jZVxuUHJvZHVjdFNjaGVtYS5pbmRleCh7IG5hbWU6ICd0ZXh0JywgZGVzY3JpcHRpb246ICd0ZXh0JyB9KVxuUHJvZHVjdFNjaGVtYS5pbmRleCh7IGNhdGVnb3J5OiAxLCBpc0FjdGl2ZTogMSB9KVxuUHJvZHVjdFNjaGVtYS5pbmRleCh7IHByaWNlOiAxIH0pXG5Qcm9kdWN0U2NoZW1hLmluZGV4KHsgYXZlcmFnZVJhdGluZzogLTEgfSlcblByb2R1Y3RTY2hlbWEuaW5kZXgoeyBjcmVhdGVkQXQ6IC0xIH0pXG5cbi8vIFZpcnR1YWwgdm9vciBkaXNjb3VudCBwZXJjZW50YWdlXG5Qcm9kdWN0U2NoZW1hLnZpcnR1YWwoJ2Rpc2NvdW50UGVyY2VudGFnZScpLmdldChmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMub3JpZ2luYWxQcmljZSAmJiB0aGlzLm9yaWdpbmFsUHJpY2UgPiB0aGlzLnByaWNlKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoKCh0aGlzLm9yaWdpbmFsUHJpY2UgLSB0aGlzLnByaWNlKSAvIHRoaXMub3JpZ2luYWxQcmljZSkgKiAxMDApXG4gIH1cbiAgcmV0dXJuIDBcbn0pXG5cbi8vIE1ldGhvZCBvbSByYXRpbmcgdGUgdXBkYXRlblxuUHJvZHVjdFNjaGVtYS5tZXRob2RzLnVwZGF0ZVJhdGluZyA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5yZXZpZXdzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCB0b3RhbFJhdGluZyA9IHRoaXMucmV2aWV3cy5yZWR1Y2UoKHN1bSwgcmV2aWV3KSA9PiBzdW0gKyByZXZpZXcucmF0aW5nLCAwKVxuICAgIHRoaXMuYXZlcmFnZVJhdGluZyA9IE1hdGgucm91bmQoKHRvdGFsUmF0aW5nIC8gdGhpcy5yZXZpZXdzLmxlbmd0aCkgKiAxMCkgLyAxMFxuICAgIHRoaXMudG90YWxSZXZpZXdzID0gdGhpcy5yZXZpZXdzLmxlbmd0aFxuICB9IGVsc2Uge1xuICAgIHRoaXMuYXZlcmFnZVJhdGluZyA9IDBcbiAgICB0aGlzLnRvdGFsUmV2aWV3cyA9IDBcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuUHJvZHVjdCB8fCBtb25nb29zZS5tb2RlbCgnUHJvZHVjdCcsIFByb2R1Y3RTY2hlbWEpXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJQcm9kdWN0U2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInRyaW0iLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiTnVtYmVyIiwibWluIiwib3JpZ2luYWxQcmljZSIsImltYWdlcyIsInVybCIsImFsdCIsImNhdGVnb3J5IiwiZW51bSIsInN1YmNhdGVnb3J5IiwiYnJhbmQiLCJza3UiLCJ1bmlxdWUiLCJzcGFyc2UiLCJzdG9jayIsImRlZmF1bHQiLCJpc0FjdGl2ZSIsIkJvb2xlYW4iLCJpc0ZlYXR1cmVkIiwidGFncyIsInNwZWNpZmljYXRpb25zIiwiTWFwIiwib2YiLCJzaGlwcGluZyIsIndlaWdodCIsImRpbWVuc2lvbnMiLCJsZW5ndGgiLCJ3aWR0aCIsImhlaWdodCIsImZyZWVTaGlwcGluZyIsInN1cHBsaWVyIiwiY29udGFjdCIsImVtYWlsIiwicmV2aWV3cyIsInVzZXJJZCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyYXRpbmciLCJtYXgiLCJjb21tZW50IiwiY3JlYXRlZEF0IiwiRGF0ZSIsIm5vdyIsImF2ZXJhZ2VSYXRpbmciLCJ0b3RhbFJldmlld3MiLCJzYWxlcyIsInNob3BpZnlJZCIsInNob3BpZnlWYXJpYW50SWQiLCJ0cmVuZGluZ1Njb3JlIiwiaXNUcmVuZGluZyIsImxhc3RVcGRhdGVkIiwiYWxpZXhwcmVzc1VybCIsImNvc3RQcmljZSIsInByb2ZpdE1hcmdpbiIsInRpbWVzdGFtcHMiLCJpbmRleCIsInZpcnR1YWwiLCJnZXQiLCJNYXRoIiwicm91bmQiLCJtZXRob2RzIiwidXBkYXRlUmF0aW5nIiwidG90YWxSYXRpbmciLCJyZWR1Y2UiLCJzdW0iLCJyZXZpZXciLCJtb2RlbHMiLCJQcm9kdWN0IiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/Product.js\n");

/***/ }),

/***/ "(api)/./pages/api/products/index.js":
/*!*************************************!*\
  !*** ./pages/api/products/index.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(api)/./lib/mongodb.js\");\n/* harmony import */ var _models_Product__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/Product */ \"(api)/./models/Product.js\");\n\n\nasync function handler(req, res) {\n    await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n    if (req.method === \"GET\") {\n        try {\n            const { page = 1, limit = 12, category, minPrice, maxPrice, sort = \"createdAt\", order = \"desc\", search } = req.query;\n            // Build filter object\n            const filter = {\n                isActive: true\n            };\n            if (category && category !== \"all\") {\n                filter.category = category;\n            }\n            if (minPrice || maxPrice) {\n                filter.price = {};\n                if (minPrice) filter.price.$gte = parseFloat(minPrice);\n                if (maxPrice) filter.price.$lte = parseFloat(maxPrice);\n            }\n            if (search) {\n                filter.$text = {\n                    $search: search\n                };\n            }\n            // Build sort object\n            const sortObj = {};\n            if (sort === \"price\") {\n                sortObj.price = order === \"asc\" ? 1 : -1;\n            } else if (sort === \"rating\") {\n                sortObj.averageRating = order === \"asc\" ? 1 : -1;\n            } else if (sort === \"popular\") {\n                sortObj.sales = -1;\n            } else {\n                sortObj[sort] = order === \"asc\" ? 1 : -1;\n            }\n            const skip = (parseInt(page) - 1) * parseInt(limit);\n            const [products, total] = await Promise.all([\n                _models_Product__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(filter).sort(sortObj).skip(skip).limit(parseInt(limit)).lean(),\n                _models_Product__WEBPACK_IMPORTED_MODULE_1__[\"default\"].countDocuments(filter)\n            ]);\n            res.status(200).json({\n                success: true,\n                products,\n                pagination: {\n                    current: parseInt(page),\n                    pages: Math.ceil(total / parseInt(limit)),\n                    total,\n                    limit: parseInt(limit)\n                }\n            });\n        } catch (error) {\n            console.error(\"Error fetching products:\", error);\n            res.status(500).json({\n                success: false,\n                message: \"Error fetching products\",\n                error: error.message\n            });\n        }\n    } else if (req.method === \"POST\") {\n        try {\n            const product = new _models_Product__WEBPACK_IMPORTED_MODULE_1__[\"default\"](req.body);\n            await product.save();\n            res.status(201).json({\n                success: true,\n                data: product\n            });\n        } catch (error) {\n            console.error(\"Error creating product:\", error);\n            res.status(500).json({\n                success: false,\n                message: \"Error creating product\",\n                error: error.message\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"GET\",\n            \"POST\"\n        ]);\n        res.status(405).json({\n            success: false,\n            message: `Method ${req.method} not allowed`\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsS0FBS0MsSUFBSSxDQUFDO2dCQUNuQkMsU0FBUztnQkFDVFEsU0FBUztnQkFDVEYsT0FBT0EsTUFBTUUsT0FBTztZQUN0QjtRQUNGO0lBQ0YsT0FBTztRQUNMekMsSUFBSThDLFNBQVMsQ0FBQyxTQUFTO1lBQUM7WUFBTztTQUFPO1FBQ3RDOUMsSUFBSStCLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJDLFNBQVM7WUFDVFEsU0FBUyxDQUFDLE9BQU8sRUFBRTFDLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFDN0M7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJvcHNoaXAtbW90aW9uLy4vcGFnZXMvYXBpL3Byb2R1Y3RzL2luZGV4LmpzPzU5NzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbm5lY3REQiBmcm9tICcuLi8uLi8uLi9saWIvbW9uZ29kYidcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4uLy4uLy4uL21vZGVscy9Qcm9kdWN0J1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGF3YWl0IGNvbm5lY3REQigpXG5cbiAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGFnZSA9IDEsXG4gICAgICAgIGxpbWl0ID0gMTIsXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICBtaW5QcmljZSxcbiAgICAgICAgbWF4UHJpY2UsXG4gICAgICAgIHNvcnQgPSAnY3JlYXRlZEF0JyxcbiAgICAgICAgb3JkZXIgPSAnZGVzYycsXG4gICAgICAgIHNlYXJjaFxuICAgICAgfSA9IHJlcS5xdWVyeVxuXG4gICAgICAvLyBCdWlsZCBmaWx0ZXIgb2JqZWN0XG4gICAgICBjb25zdCBmaWx0ZXIgPSB7IGlzQWN0aXZlOiB0cnVlIH1cbiAgICAgIFxuICAgICAgaWYgKGNhdGVnb3J5ICYmIGNhdGVnb3J5ICE9PSAnYWxsJykge1xuICAgICAgICBmaWx0ZXIuY2F0ZWdvcnkgPSBjYXRlZ29yeVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWluUHJpY2UgfHwgbWF4UHJpY2UpIHtcbiAgICAgICAgZmlsdGVyLnByaWNlID0ge31cbiAgICAgICAgaWYgKG1pblByaWNlKSBmaWx0ZXIucHJpY2UuJGd0ZSA9IHBhcnNlRmxvYXQobWluUHJpY2UpXG4gICAgICAgIGlmIChtYXhQcmljZSkgZmlsdGVyLnByaWNlLiRsdGUgPSBwYXJzZUZsb2F0KG1heFByaWNlKVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc2VhcmNoKSB7XG4gICAgICAgIGZpbHRlci4kdGV4dCA9IHsgJHNlYXJjaDogc2VhcmNoIH1cbiAgICAgIH1cblxuICAgICAgLy8gQnVpbGQgc29ydCBvYmplY3RcbiAgICAgIGNvbnN0IHNvcnRPYmogPSB7fVxuICAgICAgaWYgKHNvcnQgPT09ICdwcmljZScpIHtcbiAgICAgICAgc29ydE9iai5wcmljZSA9IG9yZGVyID09PSAnYXNjJyA/IDEgOiAtMVxuICAgICAgfSBlbHNlIGlmIChzb3J0ID09PSAncmF0aW5nJykge1xuICAgICAgICBzb3J0T2JqLmF2ZXJhZ2VSYXRpbmcgPSBvcmRlciA9PT0gJ2FzYycgPyAxIDogLTFcbiAgICAgIH0gZWxzZSBpZiAoc29ydCA9PT0gJ3BvcHVsYXInKSB7XG4gICAgICAgIHNvcnRPYmouc2FsZXMgPSAtMVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc29ydE9ialtzb3J0XSA9IG9yZGVyID09PSAnYXNjJyA/IDEgOiAtMVxuICAgICAgfVxuXG4gICAgICBjb25zdCBza2lwID0gKHBhcnNlSW50KHBhZ2UpIC0gMSkgKiBwYXJzZUludChsaW1pdClcblxuICAgICAgY29uc3QgW3Byb2R1Y3RzLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIFByb2R1Y3QuZmluZChmaWx0ZXIpXG4gICAgICAgICAgLnNvcnQoc29ydE9iailcbiAgICAgICAgICAuc2tpcChza2lwKVxuICAgICAgICAgIC5saW1pdChwYXJzZUludChsaW1pdCkpXG4gICAgICAgICAgLmxlYW4oKSxcbiAgICAgICAgUHJvZHVjdC5jb3VudERvY3VtZW50cyhmaWx0ZXIpXG4gICAgICBdKVxuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHByb2R1Y3RzLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgY3VycmVudDogcGFyc2VJbnQocGFnZSksXG4gICAgICAgICAgcGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIHBhcnNlSW50KGxpbWl0KSksXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgbGltaXQ6IHBhcnNlSW50KGxpbWl0KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9kdWN0czonLCBlcnJvcilcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdFcnJvciBmZXRjaGluZyBwcm9kdWN0cycsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KVxuICAgIH1cbiAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHJlcS5ib2R5KVxuICAgICAgYXdhaXQgcHJvZHVjdC5zYXZlKClcbiAgICAgIFxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBwcm9kdWN0XG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwcm9kdWN0OicsIGVycm9yKVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGNyZWF0aW5nIHByb2R1Y3QnLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgfSlcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ0dFVCcsICdQT1NUJ10pXG4gICAgcmVzLnN0YXR1cyg0MDUpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gbm90IGFsbG93ZWRgXG4gICAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbm5lY3REQiIsIlByb2R1Y3QiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwicGFnZSIsImxpbWl0IiwiY2F0ZWdvcnkiLCJtaW5QcmljZSIsIm1heFByaWNlIiwic29ydCIsIm9yZGVyIiwic2VhcmNoIiwicXVlcnkiLCJmaWx0ZXIiLCJpc0FjdGl2ZSIsInByaWNlIiwiJGd0ZSIsInBhcnNlRmxvYXQiLCIkbHRlIiwiJHRleHQiLCIkc2VhcmNoIiwic29ydE9iaiIsImF2ZXJhZ2VSYXRpbmciLCJzYWxlcyIsInNraXAiLCJwYXJzZUludCIsInByb2R1Y3RzIiwidG90YWwiLCJQcm9taXNlIiwiYWxsIiwiZmluZCIsImxlYW4iLCJjb3VudERvY3VtZW50cyIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwicGFnaW5hdGlvbiIsImN1cnJlbnQiLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsInByb2R1Y3QiLCJib2R5Iiwic2F2ZSIsImRhdGEiLCJzZXRIZWFkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/products/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts%2Findex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();